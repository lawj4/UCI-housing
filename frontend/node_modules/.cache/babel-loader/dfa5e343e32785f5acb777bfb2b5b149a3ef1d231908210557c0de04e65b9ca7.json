{"ast":null,"code":"\"use strict\";\n\n/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parsePSelectors = void 0;\nconst parsel_js_js_1 = require(\"../../third_party/parsel-js/parsel-js.js\");\nparsel_js_js_1.TOKENS['nesting'] = /&/g;\nparsel_js_js_1.TOKENS['combinator'] = /\\s*(>>>>?|[\\s>+~])\\s*/g;\nconst ESCAPE_REGEXP = /\\\\[\\s\\S]/g;\nconst unquote = text => {\n  if (text.length <= 1) {\n    return text;\n  }\n  if ((text[0] === '\"' || text[0] === \"'\") && text.endsWith(text[0])) {\n    text = text.slice(1, -1);\n  }\n  return text.replace(ESCAPE_REGEXP, match => {\n    return match[1];\n  });\n};\n/**\n * @internal\n */\nfunction parsePSelectors(selector) {\n  let isPureCSS = true;\n  let hasAria = false;\n  let hasPseudoClasses = false;\n  const tokens = (0, parsel_js_js_1.tokenize)(selector);\n  if (tokens.length === 0) {\n    return [[], isPureCSS, hasPseudoClasses, false];\n  }\n  let compoundSelector = [];\n  let complexSelector = [compoundSelector];\n  const selectors = [complexSelector];\n  const storage = [];\n  for (const token of tokens) {\n    switch (token.type) {\n      case 'combinator':\n        switch (token.content) {\n          case \">>>\" /* PCombinator.Descendent */:\n            isPureCSS = false;\n            if (storage.length) {\n              compoundSelector.push((0, parsel_js_js_1.stringify)(storage));\n              storage.splice(0);\n            }\n            compoundSelector = [];\n            complexSelector.push(\">>>\" /* PCombinator.Descendent */);\n            complexSelector.push(compoundSelector);\n            continue;\n          case \">>>>\" /* PCombinator.Child */:\n            isPureCSS = false;\n            if (storage.length) {\n              compoundSelector.push((0, parsel_js_js_1.stringify)(storage));\n              storage.splice(0);\n            }\n            compoundSelector = [];\n            complexSelector.push(\">>>>\" /* PCombinator.Child */);\n            complexSelector.push(compoundSelector);\n            continue;\n        }\n        break;\n      case 'pseudo-element':\n        if (!token.name.startsWith('-p-')) {\n          break;\n        }\n        isPureCSS = false;\n        if (storage.length) {\n          compoundSelector.push((0, parsel_js_js_1.stringify)(storage));\n          storage.splice(0);\n        }\n        const name = token.name.slice(3);\n        if (name === 'aria') {\n          hasAria = true;\n        }\n        compoundSelector.push({\n          name,\n          value: unquote(token.argument ?? '')\n        });\n        continue;\n      case 'pseudo-class':\n        hasPseudoClasses = true;\n        break;\n      case 'comma':\n        if (storage.length) {\n          compoundSelector.push((0, parsel_js_js_1.stringify)(storage));\n          storage.splice(0);\n        }\n        compoundSelector = [];\n        complexSelector = [compoundSelector];\n        selectors.push(complexSelector);\n        continue;\n    }\n    storage.push(token);\n  }\n  if (storage.length) {\n    compoundSelector.push((0, parsel_js_js_1.stringify)(storage));\n  }\n  return [selectors, isPureCSS, hasPseudoClasses, hasAria];\n}\nexports.parsePSelectors = parsePSelectors;","map":{"version":3,"names":["parsel_js_js_1","require","TOKENS","ESCAPE_REGEXP","unquote","text","length","endsWith","slice","replace","match","parsePSelectors","selector","isPureCSS","hasAria","hasPseudoClasses","tokens","tokenize","compoundSelector","complexSelector","selectors","storage","token","type","content","push","stringify","splice","name","startsWith","value","argument","exports"],"sources":["/Users/lawj4/webDevelopment/node_modules/puppeteer-core/src/common/PSelectorParser.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {\n  type Token,\n  tokenize,\n  TOKENS,\n  stringify,\n} from '../../third_party/parsel-js/parsel-js.js';\nimport type {\n  ComplexPSelector,\n  ComplexPSelectorList,\n  CompoundPSelector,\n} from '../injected/PQuerySelector.js';\nimport {PCombinator} from '../injected/PQuerySelector.js';\n\nTOKENS['nesting'] = /&/g;\nTOKENS['combinator'] = /\\s*(>>>>?|[\\s>+~])\\s*/g;\n\nconst ESCAPE_REGEXP = /\\\\[\\s\\S]/g;\nconst unquote = (text: string): string => {\n  if (text.length <= 1) {\n    return text;\n  }\n  if ((text[0] === '\"' || text[0] === \"'\") && text.endsWith(text[0])) {\n    text = text.slice(1, -1);\n  }\n  return text.replace(ESCAPE_REGEXP, match => {\n    return match[1] as string;\n  });\n};\n\n/**\n * @internal\n */\nexport function parsePSelectors(\n  selector: string\n): [\n  selector: ComplexPSelectorList,\n  isPureCSS: boolean,\n  hasPseudoClasses: boolean,\n  hasAria: boolean,\n] {\n  let isPureCSS = true;\n  let hasAria = false;\n  let hasPseudoClasses = false;\n  const tokens = tokenize(selector);\n  if (tokens.length === 0) {\n    return [[], isPureCSS, hasPseudoClasses, false];\n  }\n  let compoundSelector: CompoundPSelector = [];\n  let complexSelector: ComplexPSelector = [compoundSelector];\n  const selectors: ComplexPSelectorList = [complexSelector];\n  const storage: Token[] = [];\n  for (const token of tokens) {\n    switch (token.type) {\n      case 'combinator':\n        switch (token.content) {\n          case PCombinator.Descendent:\n            isPureCSS = false;\n            if (storage.length) {\n              compoundSelector.push(stringify(storage));\n              storage.splice(0);\n            }\n            compoundSelector = [];\n            complexSelector.push(PCombinator.Descendent);\n            complexSelector.push(compoundSelector);\n            continue;\n          case PCombinator.Child:\n            isPureCSS = false;\n            if (storage.length) {\n              compoundSelector.push(stringify(storage));\n              storage.splice(0);\n            }\n            compoundSelector = [];\n            complexSelector.push(PCombinator.Child);\n            complexSelector.push(compoundSelector);\n            continue;\n        }\n        break;\n      case 'pseudo-element':\n        if (!token.name.startsWith('-p-')) {\n          break;\n        }\n        isPureCSS = false;\n        if (storage.length) {\n          compoundSelector.push(stringify(storage));\n          storage.splice(0);\n        }\n        const name = token.name.slice(3);\n        if (name === 'aria') {\n          hasAria = true;\n        }\n        compoundSelector.push({\n          name,\n          value: unquote(token.argument ?? ''),\n        });\n        continue;\n      case 'pseudo-class':\n        hasPseudoClasses = true;\n        break;\n      case 'comma':\n        if (storage.length) {\n          compoundSelector.push(stringify(storage));\n          storage.splice(0);\n        }\n        compoundSelector = [];\n        complexSelector = [compoundSelector];\n        selectors.push(complexSelector);\n        continue;\n    }\n    storage.push(token);\n  }\n  if (storage.length) {\n    compoundSelector.push(stringify(storage));\n  }\n  return [selectors, isPureCSS, hasPseudoClasses, hasAria];\n}\n"],"mappings":";;AAAA;;;;;;;;;AAMA,MAAAA,cAAA,GAAAC,OAAA;AAaAD,cAAA,CAAAE,MAAM,CAAC,SAAS,CAAC,GAAG,IAAI;AACxBF,cAAA,CAAAE,MAAM,CAAC,YAAY,CAAC,GAAG,wBAAwB;AAE/C,MAAMC,aAAa,GAAG,WAAW;AACjC,MAAMC,OAAO,GAAIC,IAAY,IAAY;EACvC,IAAIA,IAAI,CAACC,MAAM,IAAI,CAAC,EAAE;IACpB,OAAOD,IAAI;EACb;EACA,IAAI,CAACA,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,IAAIA,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,KAAKA,IAAI,CAACE,QAAQ,CAACF,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE;IAClEA,IAAI,GAAGA,IAAI,CAACG,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EAC1B;EACA,OAAOH,IAAI,CAACI,OAAO,CAACN,aAAa,EAAEO,KAAK,IAAG;IACzC,OAAOA,KAAK,CAAC,CAAC,CAAW;EAC3B,CAAC,CAAC;AACJ,CAAC;AAED;;;AAGA,SAAgBC,eAAeA,CAC7BC,QAAgB;EAOhB,IAAIC,SAAS,GAAG,IAAI;EACpB,IAAIC,OAAO,GAAG,KAAK;EACnB,IAAIC,gBAAgB,GAAG,KAAK;EAC5B,MAAMC,MAAM,GAAG,IAAAhB,cAAA,CAAAiB,QAAQ,EAACL,QAAQ,CAAC;EACjC,IAAII,MAAM,CAACV,MAAM,KAAK,CAAC,EAAE;IACvB,OAAO,CAAC,EAAE,EAAEO,SAAS,EAAEE,gBAAgB,EAAE,KAAK,CAAC;EACjD;EACA,IAAIG,gBAAgB,GAAsB,EAAE;EAC5C,IAAIC,eAAe,GAAqB,CAACD,gBAAgB,CAAC;EAC1D,MAAME,SAAS,GAAyB,CAACD,eAAe,CAAC;EACzD,MAAME,OAAO,GAAY,EAAE;EAC3B,KAAK,MAAMC,KAAK,IAAIN,MAAM,EAAE;IAC1B,QAAQM,KAAK,CAACC,IAAI;MAChB,KAAK,YAAY;QACf,QAAQD,KAAK,CAACE,OAAO;UACnB;YACEX,SAAS,GAAG,KAAK;YACjB,IAAIQ,OAAO,CAACf,MAAM,EAAE;cAClBY,gBAAgB,CAACO,IAAI,CAAC,IAAAzB,cAAA,CAAA0B,SAAS,EAACL,OAAO,CAAC,CAAC;cACzCA,OAAO,CAACM,MAAM,CAAC,CAAC,CAAC;YACnB;YACAT,gBAAgB,GAAG,EAAE;YACrBC,eAAe,CAACM,IAAI,oCAAwB;YAC5CN,eAAe,CAACM,IAAI,CAACP,gBAAgB,CAAC;YACtC;UACF;YACEL,SAAS,GAAG,KAAK;YACjB,IAAIQ,OAAO,CAACf,MAAM,EAAE;cAClBY,gBAAgB,CAACO,IAAI,CAAC,IAAAzB,cAAA,CAAA0B,SAAS,EAACL,OAAO,CAAC,CAAC;cACzCA,OAAO,CAACM,MAAM,CAAC,CAAC,CAAC;YACnB;YACAT,gBAAgB,GAAG,EAAE;YACrBC,eAAe,CAACM,IAAI,gCAAmB;YACvCN,eAAe,CAACM,IAAI,CAACP,gBAAgB,CAAC;YACtC;QACJ;QACA;MACF,KAAK,gBAAgB;QACnB,IAAI,CAACI,KAAK,CAACM,IAAI,CAACC,UAAU,CAAC,KAAK,CAAC,EAAE;UACjC;QACF;QACAhB,SAAS,GAAG,KAAK;QACjB,IAAIQ,OAAO,CAACf,MAAM,EAAE;UAClBY,gBAAgB,CAACO,IAAI,CAAC,IAAAzB,cAAA,CAAA0B,SAAS,EAACL,OAAO,CAAC,CAAC;UACzCA,OAAO,CAACM,MAAM,CAAC,CAAC,CAAC;QACnB;QACA,MAAMC,IAAI,GAAGN,KAAK,CAACM,IAAI,CAACpB,KAAK,CAAC,CAAC,CAAC;QAChC,IAAIoB,IAAI,KAAK,MAAM,EAAE;UACnBd,OAAO,GAAG,IAAI;QAChB;QACAI,gBAAgB,CAACO,IAAI,CAAC;UACpBG,IAAI;UACJE,KAAK,EAAE1B,OAAO,CAACkB,KAAK,CAACS,QAAQ,IAAI,EAAE;SACpC,CAAC;QACF;MACF,KAAK,cAAc;QACjBhB,gBAAgB,GAAG,IAAI;QACvB;MACF,KAAK,OAAO;QACV,IAAIM,OAAO,CAACf,MAAM,EAAE;UAClBY,gBAAgB,CAACO,IAAI,CAAC,IAAAzB,cAAA,CAAA0B,SAAS,EAACL,OAAO,CAAC,CAAC;UACzCA,OAAO,CAACM,MAAM,CAAC,CAAC,CAAC;QACnB;QACAT,gBAAgB,GAAG,EAAE;QACrBC,eAAe,GAAG,CAACD,gBAAgB,CAAC;QACpCE,SAAS,CAACK,IAAI,CAACN,eAAe,CAAC;QAC/B;IACJ;IACAE,OAAO,CAACI,IAAI,CAACH,KAAK,CAAC;EACrB;EACA,IAAID,OAAO,CAACf,MAAM,EAAE;IAClBY,gBAAgB,CAACO,IAAI,CAAC,IAAAzB,cAAA,CAAA0B,SAAS,EAACL,OAAO,CAAC,CAAC;EAC3C;EACA,OAAO,CAACD,SAAS,EAAEP,SAAS,EAAEE,gBAAgB,EAAED,OAAO,CAAC;AAC1D;AAlFAkB,OAAA,CAAArB,eAAA,GAAAA,eAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}