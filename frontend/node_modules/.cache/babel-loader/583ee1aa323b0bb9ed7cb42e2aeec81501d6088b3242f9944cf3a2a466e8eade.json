{"ast":null,"code":"\"use strict\";\n\n/**\n * @license\n * Copyright 2017 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CdpCDPSession = void 0;\nconst CDPSession_js_1 = require(\"../api/CDPSession.js\");\nconst CallbackRegistry_js_1 = require(\"../common/CallbackRegistry.js\");\nconst Errors_js_1 = require(\"../common/Errors.js\");\nconst assert_js_1 = require(\"../util/assert.js\");\nconst ErrorLike_js_1 = require(\"../util/ErrorLike.js\");\n/**\n * @internal\n */\nclass CdpCDPSession extends CDPSession_js_1.CDPSession {\n  #sessionId;\n  #targetType;\n  #callbacks = new CallbackRegistry_js_1.CallbackRegistry();\n  #connection;\n  #parentSessionId;\n  #target;\n  /**\n   * @internal\n   */\n  constructor(connection, targetType, sessionId, parentSessionId) {\n    super();\n    this.#connection = connection;\n    this.#targetType = targetType;\n    this.#sessionId = sessionId;\n    this.#parentSessionId = parentSessionId;\n  }\n  /**\n   * Sets the {@link CdpTarget} associated with the session instance.\n   *\n   * @internal\n   */\n  _setTarget(target) {\n    this.#target = target;\n  }\n  /**\n   * Gets the {@link CdpTarget} associated with the session instance.\n   *\n   * @internal\n   */\n  _target() {\n    (0, assert_js_1.assert)(this.#target, 'Target must exist');\n    return this.#target;\n  }\n  connection() {\n    return this.#connection;\n  }\n  parentSession() {\n    if (!this.#parentSessionId) {\n      // To make it work in Firefox that does not have parent (tab) sessions.\n      return this;\n    }\n    const parent = this.#connection?.session(this.#parentSessionId);\n    return parent ?? undefined;\n  }\n  send(method, params, options) {\n    if (!this.#connection) {\n      return Promise.reject(new Errors_js_1.TargetCloseError(`Protocol error (${method}): Session closed. Most likely the ${this.#targetType} has been closed.`));\n    }\n    return this.#connection._rawSend(this.#callbacks, method, params, this.#sessionId, options);\n  }\n  /**\n   * @internal\n   */\n  _onMessage(object) {\n    if (object.id) {\n      if (object.error) {\n        this.#callbacks.reject(object.id, (0, ErrorLike_js_1.createProtocolErrorMessage)(object), object.error.message);\n      } else {\n        this.#callbacks.resolve(object.id, object.result);\n      }\n    } else {\n      (0, assert_js_1.assert)(!object.id);\n      this.emit(object.method, object.params);\n    }\n  }\n  /**\n   * Detaches the cdpSession from the target. Once detached, the cdpSession object\n   * won't emit any events and can't be used to send messages.\n   */\n  async detach() {\n    if (!this.#connection) {\n      throw new Error(`Session already detached. Most likely the ${this.#targetType} has been closed.`);\n    }\n    await this.#connection.send('Target.detachFromTarget', {\n      sessionId: this.#sessionId\n    });\n  }\n  /**\n   * @internal\n   */\n  _onClosed() {\n    this.#callbacks.clear();\n    this.#connection = undefined;\n    this.emit(CDPSession_js_1.CDPSessionEvent.Disconnected, undefined);\n  }\n  /**\n   * Returns the session's id.\n   */\n  id() {\n    return this.#sessionId;\n  }\n  /**\n   * @internal\n   */\n  getPendingProtocolErrors() {\n    return this.#callbacks.getPendingProtocolErrors();\n  }\n}\nexports.CdpCDPSession = CdpCDPSession;","map":{"version":3,"names":["CDPSession_js_1","require","CallbackRegistry_js_1","Errors_js_1","assert_js_1","ErrorLike_js_1","CdpCDPSession","CDPSession","sessionId","targetType","callbacks","CallbackRegistry","connection","parentSessionId","target","constructor","_setTarget","_target","assert","parentSession","parent","session","undefined","send","method","params","options","Promise","reject","TargetCloseError","_rawSend","_onMessage","object","id","error","createProtocolErrorMessage","message","resolve","result","emit","detach","Error","_onClosed","clear","CDPSessionEvent","Disconnected","getPendingProtocolErrors","exports"],"sources":["/Users/lawj4/webDevelopment/Todo-List/frontend/node_modules/puppeteer-core/src/cdp/CDPSession.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2017 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport type {ProtocolMapping} from 'devtools-protocol/types/protocol-mapping.js';\n\nimport {\n  type CDPEvents,\n  CDPSession,\n  CDPSessionEvent,\n  type CommandOptions,\n} from '../api/CDPSession.js';\nimport {CallbackRegistry} from '../common/CallbackRegistry.js';\nimport {TargetCloseError} from '../common/Errors.js';\nimport {assert} from '../util/assert.js';\nimport {createProtocolErrorMessage} from '../util/ErrorLike.js';\n\nimport type {Connection} from './Connection.js';\nimport type {CdpTarget} from './Target.js';\n\n/**\n * @internal\n */\n\nexport class CdpCDPSession extends CDPSession {\n  #sessionId: string;\n  #targetType: string;\n  #callbacks = new CallbackRegistry();\n  #connection?: Connection;\n  #parentSessionId?: string;\n  #target?: CdpTarget;\n\n  /**\n   * @internal\n   */\n  constructor(\n    connection: Connection,\n    targetType: string,\n    sessionId: string,\n    parentSessionId: string | undefined\n  ) {\n    super();\n    this.#connection = connection;\n    this.#targetType = targetType;\n    this.#sessionId = sessionId;\n    this.#parentSessionId = parentSessionId;\n  }\n\n  /**\n   * Sets the {@link CdpTarget} associated with the session instance.\n   *\n   * @internal\n   */\n  _setTarget(target: CdpTarget): void {\n    this.#target = target;\n  }\n\n  /**\n   * Gets the {@link CdpTarget} associated with the session instance.\n   *\n   * @internal\n   */\n  _target(): CdpTarget {\n    assert(this.#target, 'Target must exist');\n    return this.#target;\n  }\n\n  override connection(): Connection | undefined {\n    return this.#connection;\n  }\n\n  override parentSession(): CDPSession | undefined {\n    if (!this.#parentSessionId) {\n      // To make it work in Firefox that does not have parent (tab) sessions.\n      return this;\n    }\n    const parent = this.#connection?.session(this.#parentSessionId);\n    return parent ?? undefined;\n  }\n\n  override send<T extends keyof ProtocolMapping.Commands>(\n    method: T,\n    params?: ProtocolMapping.Commands[T]['paramsType'][0],\n    options?: CommandOptions\n  ): Promise<ProtocolMapping.Commands[T]['returnType']> {\n    if (!this.#connection) {\n      return Promise.reject(\n        new TargetCloseError(\n          `Protocol error (${method}): Session closed. Most likely the ${this.#targetType} has been closed.`\n        )\n      );\n    }\n    return this.#connection._rawSend(\n      this.#callbacks,\n      method,\n      params,\n      this.#sessionId,\n      options\n    );\n  }\n\n  /**\n   * @internal\n   */\n  _onMessage(object: {\n    id?: number;\n    method: keyof CDPEvents;\n    params: CDPEvents[keyof CDPEvents];\n    error: {message: string; data: any; code: number};\n    result?: any;\n  }): void {\n    if (object.id) {\n      if (object.error) {\n        this.#callbacks.reject(\n          object.id,\n          createProtocolErrorMessage(object),\n          object.error.message\n        );\n      } else {\n        this.#callbacks.resolve(object.id, object.result);\n      }\n    } else {\n      assert(!object.id);\n      this.emit(object.method, object.params);\n    }\n  }\n\n  /**\n   * Detaches the cdpSession from the target. Once detached, the cdpSession object\n   * won't emit any events and can't be used to send messages.\n   */\n  override async detach(): Promise<void> {\n    if (!this.#connection) {\n      throw new Error(\n        `Session already detached. Most likely the ${this.#targetType} has been closed.`\n      );\n    }\n    await this.#connection.send('Target.detachFromTarget', {\n      sessionId: this.#sessionId,\n    });\n  }\n\n  /**\n   * @internal\n   */\n  _onClosed(): void {\n    this.#callbacks.clear();\n    this.#connection = undefined;\n    this.emit(CDPSessionEvent.Disconnected, undefined);\n  }\n\n  /**\n   * Returns the session's id.\n   */\n  override id(): string {\n    return this.#sessionId;\n  }\n\n  /**\n   * @internal\n   */\n  getPendingProtocolErrors(): Error[] {\n    return this.#callbacks.getPendingProtocolErrors();\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}