{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PreloadScriptStorage = void 0;\n/**\n * Container class for preload scripts.\n */\nclass PreloadScriptStorage {\n  /** Tracks all BiDi preload scripts.  */\n  #scripts = new Set();\n  /**\n   * Finds all entries that match the given filter (OR logic).\n   */\n  find(filter) {\n    if (!filter) {\n      return [...this.#scripts];\n    }\n    return [...this.#scripts].filter(script => {\n      if (filter.id !== undefined && filter.id === script.id) {\n        return true;\n      }\n      if (filter.targetId !== undefined && script.targetIds.has(filter.targetId)) {\n        return true;\n      }\n      if (filter.global !== undefined && (\n      // Global scripts have no contexts\n      filter.global && script.contexts === undefined ||\n      // Non global scripts always have contexts\n      !filter.global && script.contexts !== undefined)) {\n        return true;\n      }\n      return false;\n    });\n  }\n  add(preloadScript) {\n    this.#scripts.add(preloadScript);\n  }\n  /** Deletes all BiDi preload script entries that match the given filter. */\n  remove(filter) {\n    for (const preloadScript of this.find(filter)) {\n      this.#scripts.delete(preloadScript);\n    }\n  }\n}\nexports.PreloadScriptStorage = PreloadScriptStorage;","map":{"version":3,"names":["PreloadScriptStorage","scripts","Set","find","filter","script","id","undefined","targetId","targetIds","has","global","contexts","add","preloadScript","remove","delete","exports"],"sources":["../../../../../src/bidiMapper/modules/script/PreloadScriptStorage.ts"],"sourcesContent":[null],"mappings":";;;;;;AA2BA;;;AAGA,MAAaA,oBAAoB;EAC/B;EACS,CAAAC,OAAQ,GAAG,IAAIC,GAAG,EAAiB;EAE5C;;;EAGAC,IAAIA,CAACC,MAA4B;IAC/B,IAAI,CAACA,MAAM,EAAE;MACX,OAAO,CAAC,GAAG,IAAI,CAAC,CAAAH,OAAQ,CAAC;IAC3B;IAEA,OAAO,CAAC,GAAG,IAAI,CAAC,CAAAA,OAAQ,CAAC,CAACG,MAAM,CAAEC,MAAM,IAAI;MAC1C,IAAID,MAAM,CAACE,EAAE,KAAKC,SAAS,IAAIH,MAAM,CAACE,EAAE,KAAKD,MAAM,CAACC,EAAE,EAAE;QACtD,OAAO,IAAI;MACb;MACA,IACEF,MAAM,CAACI,QAAQ,KAAKD,SAAS,IAC7BF,MAAM,CAACI,SAAS,CAACC,GAAG,CAACN,MAAM,CAACI,QAAQ,CAAC,EACrC;QACA,OAAO,IAAI;MACb;MACA,IACEJ,MAAM,CAACO,MAAM,KAAKJ,SAAS;MAC3B;MACEH,MAAM,CAACO,MAAM,IAAIN,MAAM,CAACO,QAAQ,KAAKL,SAAS;MAC9C;MACC,CAACH,MAAM,CAACO,MAAM,IAAIN,MAAM,CAACO,QAAQ,KAAKL,SAAU,CAAC,EACpD;QACA,OAAO,IAAI;MACb;MACA,OAAO,KAAK;IACd,CAAC,CAAC;EACJ;EAEAM,GAAGA,CAACC,aAA4B;IAC9B,IAAI,CAAC,CAAAb,OAAQ,CAACY,GAAG,CAACC,aAAa,CAAC;EAClC;EAEA;EACAC,MAAMA,CAACX,MAA4B;IACjC,KAAK,MAAMU,aAAa,IAAI,IAAI,CAACX,IAAI,CAACC,MAAM,CAAC,EAAE;MAC7C,IAAI,CAAC,CAAAH,OAAQ,CAACe,MAAM,CAACF,aAAa,CAAC;IACrC;EACF;;AA5CFG,OAAA,CAAAjB,oBAAA,GAAAA,oBAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}