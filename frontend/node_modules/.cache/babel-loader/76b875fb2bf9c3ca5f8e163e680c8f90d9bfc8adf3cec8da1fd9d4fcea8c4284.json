{"ast":null,"code":"\"use strict\";\n\n/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __runInitializers = this && this.__runInitializers || function (thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n    value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\nvar __esDecorate = this && this.__esDecorate || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) {\n    if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\");\n    return f;\n  }\n  var kind = contextIn.kind,\n    key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _,\n    done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n    var context = {};\n    for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n    for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n    context.addInitializer = function (f) {\n      if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\");\n      extraInitializers.push(accept(f || null));\n    };\n    var result = (0, decorators[i])(kind === \"accessor\" ? {\n      get: descriptor.get,\n      set: descriptor.set\n    } : descriptor[key], context);\n    if (kind === \"accessor\") {\n      if (result === void 0) continue;\n      if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n      if (_ = accept(result.get)) descriptor.get = _;\n      if (_ = accept(result.set)) descriptor.set = _;\n      if (_ = accept(result.init)) initializers.unshift(_);\n    } else if (_ = accept(result)) {\n      if (kind === \"field\") initializers.unshift(_);else descriptor[key] = _;\n    }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\nvar __addDisposableResource = this && this.__addDisposableResource || function (env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    env.stack.push({\n      value: value,\n      dispose: dispose,\n      async: async\n    });\n  } else if (async) {\n    env.stack.push({\n      async: true\n    });\n  }\n  return value;\n};\nvar __disposeResources = this && this.__disposeResources || function (SuppressedError) {\n  return function (env) {\n    function fail(e) {\n      env.error = env.hasError ? new SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n      env.hasError = true;\n    }\n    function next() {\n      while (env.stack.length) {\n        var rec = env.stack.pop();\n        try {\n          var result = rec.dispose && rec.dispose.call(rec.value);\n          if (rec.async) return Promise.resolve(result).then(next, function (e) {\n            fail(e);\n            return next();\n          });\n        } catch (e) {\n          fail(e);\n        }\n      }\n      if (env.hasError) throw env.error;\n    }\n    return next();\n  };\n}(typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n});\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BidiElementHandle = void 0;\nconst ElementHandle_js_1 = require(\"../api/ElementHandle.js\");\nconst environment_js_1 = require(\"../environment.js\");\nconst AsyncIterableUtil_js_1 = require(\"../util/AsyncIterableUtil.js\");\nconst decorators_js_1 = require(\"../util/decorators.js\");\nconst JSHandle_js_1 = require(\"./JSHandle.js\");\n/**\n * @internal\n */\nlet BidiElementHandle = (() => {\n  var _a;\n  let _classSuper = ElementHandle_js_1.ElementHandle;\n  let _instanceExtraInitializers = [];\n  let _autofill_decorators;\n  let _contentFrame_decorators;\n  return class BidiElementHandle extends _classSuper {\n    static {\n      const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;\n      _autofill_decorators = [(0, decorators_js_1.throwIfDisposed)()];\n      _contentFrame_decorators = [(0, decorators_js_1.throwIfDisposed)(), (_a = ElementHandle_js_1.ElementHandle).bindIsolatedHandle.bind(_a)];\n      __esDecorate(this, null, _autofill_decorators, {\n        kind: \"method\",\n        name: \"autofill\",\n        static: false,\n        private: false,\n        access: {\n          has: obj => \"autofill\" in obj,\n          get: obj => obj.autofill\n        },\n        metadata: _metadata\n      }, null, _instanceExtraInitializers);\n      __esDecorate(this, null, _contentFrame_decorators, {\n        kind: \"method\",\n        name: \"contentFrame\",\n        static: false,\n        private: false,\n        access: {\n          has: obj => \"contentFrame\" in obj,\n          get: obj => obj.contentFrame\n        },\n        metadata: _metadata\n      }, null, _instanceExtraInitializers);\n      if (_metadata) Object.defineProperty(this, Symbol.metadata, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value: _metadata\n      });\n    }\n    static from(value, realm) {\n      return new BidiElementHandle(value, realm);\n    }\n    constructor(value, realm) {\n      super(JSHandle_js_1.BidiJSHandle.from(value, realm));\n      __runInitializers(this, _instanceExtraInitializers);\n    }\n    get realm() {\n      // SAFETY: See the super call in the constructor.\n      return this.handle.realm;\n    }\n    get frame() {\n      return this.realm.environment;\n    }\n    remoteValue() {\n      return this.handle.remoteValue();\n    }\n    async autofill(data) {\n      const client = this.frame.client;\n      const nodeInfo = await client.send('DOM.describeNode', {\n        objectId: this.handle.id\n      });\n      const fieldId = nodeInfo.node.backendNodeId;\n      const frameId = this.frame._id;\n      await client.send('Autofill.trigger', {\n        fieldId,\n        frameId,\n        card: data.creditCard\n      });\n    }\n    async contentFrame() {\n      const env_1 = {\n        stack: [],\n        error: void 0,\n        hasError: false\n      };\n      try {\n        const handle = __addDisposableResource(env_1, await this.evaluateHandle(element => {\n          if (element instanceof HTMLIFrameElement || element instanceof HTMLFrameElement) {\n            return element.contentWindow;\n          }\n          return;\n        }), false);\n        const value = handle.remoteValue();\n        if (value.type === 'window') {\n          return this.frame.page().frames().find(frame => {\n            return frame._id === value.value.context;\n          }) ?? null;\n        }\n        return null;\n      } catch (e_1) {\n        env_1.error = e_1;\n        env_1.hasError = true;\n      } finally {\n        __disposeResources(env_1);\n      }\n    }\n    async uploadFile(...files) {\n      // Locate all files and confirm that they exist.\n      const path = environment_js_1.environment.value.path;\n      files = files.map(file => {\n        if (path.win32.isAbsolute(file) || path.posix.isAbsolute(file)) {\n          return file;\n        } else {\n          return path.resolve(file);\n        }\n      });\n      await this.frame.setFiles(this, files);\n    }\n    async *queryAXTree(name, role) {\n      const results = await this.frame.locateNodes(this, {\n        type: 'accessibility',\n        value: {\n          role,\n          name\n        }\n      });\n      return yield* AsyncIterableUtil_js_1.AsyncIterableUtil.map(results, node => {\n        // TODO: maybe change ownership since the default ownership is probably none.\n        return Promise.resolve(BidiElementHandle.from(node, this.realm));\n      });\n    }\n  };\n})();\nexports.BidiElementHandle = BidiElementHandle;","map":{"version":3,"names":["ElementHandle_js_1","require","environment_js_1","AsyncIterableUtil_js_1","decorators_js_1","JSHandle_js_1","BidiElementHandle","ElementHandle","_classSuper","throwIfDisposed","_a","bindIsolatedHandle","bind","__esDecorate","_autofill_decorators","kind","name","static","private","access","has","obj","get","autofill","metadata","_metadata","_instanceExtraInitializers","_contentFrame_decorators","contentFrame","from","value","realm","constructor","BidiJSHandle","__runInitializers","handle","frame","environment","remoteValue","data","client","nodeInfo","send","objectId","id","fieldId","node","backendNodeId","frameId","_id","card","creditCard","__addDisposableResource","env_1","evaluateHandle","element","HTMLIFrameElement","HTMLFrameElement","contentWindow","type","page","frames","find","context","uploadFile","files","path","map","file","win32","isAbsolute","posix","resolve","setFiles","queryAXTree","role","results","locateNodes","AsyncIterableUtil","Promise","exports"],"sources":["/Users/lawj4/webDevelopment/node_modules/puppeteer-core/src/bidi/ElementHandle.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport type * as Bidi from 'chromium-bidi/lib/cjs/protocol/protocol.js';\n\nimport {ElementHandle, type AutofillData} from '../api/ElementHandle.js';\nimport type {AwaitableIterable} from '../common/types.js';\nimport {environment} from '../environment.js';\nimport {AsyncIterableUtil} from '../util/AsyncIterableUtil.js';\nimport {throwIfDisposed} from '../util/decorators.js';\n\nimport type {BidiFrame} from './Frame.js';\nimport {BidiJSHandle} from './JSHandle.js';\nimport type {BidiFrameRealm} from './Realm.js';\n\n/**\n * @internal\n */\nexport class BidiElementHandle<\n  ElementType extends Node = Element,\n> extends ElementHandle<ElementType> {\n  static from<ElementType extends Node = Element>(\n    value: Bidi.Script.RemoteValue,\n    realm: BidiFrameRealm\n  ): BidiElementHandle<ElementType> {\n    return new BidiElementHandle(value, realm);\n  }\n\n  declare handle: BidiJSHandle<ElementType>;\n\n  constructor(value: Bidi.Script.RemoteValue, realm: BidiFrameRealm) {\n    super(BidiJSHandle.from(value, realm));\n  }\n\n  override get realm(): BidiFrameRealm {\n    // SAFETY: See the super call in the constructor.\n    return this.handle.realm as BidiFrameRealm;\n  }\n\n  override get frame(): BidiFrame {\n    return this.realm.environment;\n  }\n\n  remoteValue(): Bidi.Script.RemoteValue {\n    return this.handle.remoteValue();\n  }\n\n  @throwIfDisposed()\n  override async autofill(data: AutofillData): Promise<void> {\n    const client = this.frame.client;\n    const nodeInfo = await client.send('DOM.describeNode', {\n      objectId: this.handle.id,\n    });\n    const fieldId = nodeInfo.node.backendNodeId;\n    const frameId = this.frame._id;\n    await client.send('Autofill.trigger', {\n      fieldId,\n      frameId,\n      card: data.creditCard,\n    });\n  }\n\n  override async contentFrame(\n    this: BidiElementHandle<HTMLIFrameElement>\n  ): Promise<BidiFrame>;\n  @throwIfDisposed()\n  @ElementHandle.bindIsolatedHandle\n  override async contentFrame(): Promise<BidiFrame | null> {\n    using handle = (await this.evaluateHandle(element => {\n      if (\n        element instanceof HTMLIFrameElement ||\n        element instanceof HTMLFrameElement\n      ) {\n        return element.contentWindow;\n      }\n      return;\n    })) as BidiJSHandle;\n    const value = handle.remoteValue();\n    if (value.type === 'window') {\n      return (\n        this.frame\n          .page()\n          .frames()\n          .find(frame => {\n            return frame._id === value.value.context;\n          }) ?? null\n      );\n    }\n    return null;\n  }\n\n  override async uploadFile(\n    this: BidiElementHandle<HTMLInputElement>,\n    ...files: string[]\n  ): Promise<void> {\n    // Locate all files and confirm that they exist.\n    const path = environment.value.path;\n    files = files.map(file => {\n      if (path.win32.isAbsolute(file) || path.posix.isAbsolute(file)) {\n        return file;\n      } else {\n        return path.resolve(file);\n      }\n    });\n    await this.frame.setFiles(this, files);\n  }\n\n  override async *queryAXTree(\n    this: BidiElementHandle<HTMLElement>,\n    name?: string | undefined,\n    role?: string | undefined\n  ): AwaitableIterable<ElementHandle<Node>> {\n    const results = await this.frame.locateNodes(this, {\n      type: 'accessibility',\n      value: {\n        role,\n        name,\n      },\n    });\n\n    return yield* AsyncIterableUtil.map(results, node => {\n      // TODO: maybe change ownership since the default ownership is probably none.\n      return Promise.resolve(BidiElementHandle.from(node, this.realm));\n    });\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}