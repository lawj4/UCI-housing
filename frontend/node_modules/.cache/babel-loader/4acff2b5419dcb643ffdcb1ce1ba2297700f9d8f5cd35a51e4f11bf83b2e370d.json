{"ast":null,"code":"\"use strict\";\n\n/**\n * Copyright 2021 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CommandProcessor = void 0;\nconst protocol_js_1 = require(\"../protocol/protocol.js\");\nconst EventEmitter_js_1 = require(\"../utils/EventEmitter.js\");\nconst log_js_1 = require(\"../utils/log.js\");\nconst BidiNoOpParser_js_1 = require(\"./BidiNoOpParser.js\");\nconst BrowserProcessor_js_1 = require(\"./modules/browser/BrowserProcessor.js\");\nconst CdpProcessor_js_1 = require(\"./modules/cdp/CdpProcessor.js\");\nconst BrowsingContextProcessor_js_1 = require(\"./modules/context/BrowsingContextProcessor.js\");\nconst InputProcessor_js_1 = require(\"./modules/input/InputProcessor.js\");\nconst NetworkProcessor_js_1 = require(\"./modules/network/NetworkProcessor.js\");\nconst PermissionsProcessor_js_1 = require(\"./modules/permissions/PermissionsProcessor.js\");\nconst ScriptProcessor_js_1 = require(\"./modules/script/ScriptProcessor.js\");\nconst SessionProcessor_js_1 = require(\"./modules/session/SessionProcessor.js\");\nconst StorageProcessor_js_1 = require(\"./modules/storage/StorageProcessor.js\");\nconst OutgoingMessage_js_1 = require(\"./OutgoingMessage.js\");\nclass CommandProcessor extends EventEmitter_js_1.EventEmitter {\n  // keep-sorted start\n  #browserProcessor;\n  #browsingContextProcessor;\n  #cdpProcessor;\n  #inputProcessor;\n  #networkProcessor;\n  #permissionsProcessor;\n  #scriptProcessor;\n  #sessionProcessor;\n  #storageProcessor;\n  // keep-sorted end\n  #parser;\n  #logger;\n  constructor(cdpConnection, browserCdpClient, eventManager, browsingContextStorage, realmStorage, preloadScriptStorage, networkStorage, parser = new BidiNoOpParser_js_1.BidiNoOpParser(), initConnection, logger) {\n    super();\n    this.#parser = parser;\n    this.#logger = logger;\n    // keep-sorted start block=yes\n    this.#browserProcessor = new BrowserProcessor_js_1.BrowserProcessor(browserCdpClient);\n    this.#browsingContextProcessor = new BrowsingContextProcessor_js_1.BrowsingContextProcessor(browserCdpClient, browsingContextStorage, eventManager);\n    this.#cdpProcessor = new CdpProcessor_js_1.CdpProcessor(browsingContextStorage, realmStorage, cdpConnection, browserCdpClient);\n    this.#inputProcessor = new InputProcessor_js_1.InputProcessor(browsingContextStorage, realmStorage);\n    this.#networkProcessor = new NetworkProcessor_js_1.NetworkProcessor(browsingContextStorage, networkStorage);\n    this.#permissionsProcessor = new PermissionsProcessor_js_1.PermissionsProcessor(browserCdpClient);\n    this.#scriptProcessor = new ScriptProcessor_js_1.ScriptProcessor(browsingContextStorage, realmStorage, preloadScriptStorage, logger);\n    this.#sessionProcessor = new SessionProcessor_js_1.SessionProcessor(eventManager, browserCdpClient, initConnection);\n    this.#storageProcessor = new StorageProcessor_js_1.StorageProcessor(browserCdpClient, browsingContextStorage, logger);\n    // keep-sorted end\n  }\n  async #processCommand(command) {\n    switch (command.method) {\n      case 'session.end':\n        // TODO: Implement.\n        break;\n      // Browser domain\n      // keep-sorted start block=yes\n      case 'browser.close':\n        return this.#browserProcessor.close();\n      case 'browser.createUserContext':\n        return await this.#browserProcessor.createUserContext(command.params);\n      case 'browser.getUserContexts':\n        return await this.#browserProcessor.getUserContexts();\n      case 'browser.removeUserContext':\n        return await this.#browserProcessor.removeUserContext(this.#parser.parseRemoveUserContextParams(command.params));\n      // keep-sorted end\n      // Browsing Context domain\n      // keep-sorted start block=yes\n      case 'browsingContext.activate':\n        return await this.#browsingContextProcessor.activate(this.#parser.parseActivateParams(command.params));\n      case 'browsingContext.captureScreenshot':\n        return await this.#browsingContextProcessor.captureScreenshot(this.#parser.parseCaptureScreenshotParams(command.params));\n      case 'browsingContext.close':\n        return await this.#browsingContextProcessor.close(this.#parser.parseCloseParams(command.params));\n      case 'browsingContext.create':\n        return await this.#browsingContextProcessor.create(this.#parser.parseCreateParams(command.params));\n      case 'browsingContext.getTree':\n        return this.#browsingContextProcessor.getTree(this.#parser.parseGetTreeParams(command.params));\n      case 'browsingContext.handleUserPrompt':\n        return await this.#browsingContextProcessor.handleUserPrompt(this.#parser.parseHandleUserPromptParams(command.params));\n      case 'browsingContext.locateNodes':\n        return await this.#browsingContextProcessor.locateNodes(this.#parser.parseLocateNodesParams(command.params));\n      case 'browsingContext.navigate':\n        return await this.#browsingContextProcessor.navigate(this.#parser.parseNavigateParams(command.params));\n      case 'browsingContext.print':\n        return await this.#browsingContextProcessor.print(this.#parser.parsePrintParams(command.params));\n      case 'browsingContext.reload':\n        return await this.#browsingContextProcessor.reload(this.#parser.parseReloadParams(command.params));\n      case 'browsingContext.setViewport':\n        return await this.#browsingContextProcessor.setViewport(this.#parser.parseSetViewportParams(command.params));\n      case 'browsingContext.traverseHistory':\n        return await this.#browsingContextProcessor.traverseHistory(this.#parser.parseTraverseHistoryParams(command.params));\n      // keep-sorted end\n      // CDP domain\n      // keep-sorted start block=yes\n      case 'cdp.getSession':\n        return this.#cdpProcessor.getSession(this.#parser.parseGetSessionParams(command.params));\n      case 'cdp.resolveRealm':\n        return this.#cdpProcessor.resolveRealm(this.#parser.parseResolveRealmParams(command.params));\n      case 'cdp.sendCommand':\n        return await this.#cdpProcessor.sendCommand(this.#parser.parseSendCommandParams(command.params));\n      // keep-sorted end\n      // Input domain\n      // keep-sorted start block=yes\n      case 'input.performActions':\n        return await this.#inputProcessor.performActions(this.#parser.parsePerformActionsParams(command.params));\n      case 'input.releaseActions':\n        return await this.#inputProcessor.releaseActions(this.#parser.parseReleaseActionsParams(command.params));\n      case 'input.setFiles':\n        return await this.#inputProcessor.setFiles(this.#parser.parseSetFilesParams(command.params));\n      // keep-sorted end\n      // Network domain\n      // keep-sorted start block=yes\n      case 'network.addIntercept':\n        return await this.#networkProcessor.addIntercept(this.#parser.parseAddInterceptParams(command.params));\n      case 'network.continueRequest':\n        return await this.#networkProcessor.continueRequest(this.#parser.parseContinueRequestParams(command.params));\n      case 'network.continueResponse':\n        return await this.#networkProcessor.continueResponse(this.#parser.parseContinueResponseParams(command.params));\n      case 'network.continueWithAuth':\n        return await this.#networkProcessor.continueWithAuth(this.#parser.parseContinueWithAuthParams(command.params));\n      case 'network.failRequest':\n        return await this.#networkProcessor.failRequest(this.#parser.parseFailRequestParams(command.params));\n      case 'network.provideResponse':\n        return await this.#networkProcessor.provideResponse(this.#parser.parseProvideResponseParams(command.params));\n      case 'network.removeIntercept':\n        return await this.#networkProcessor.removeIntercept(this.#parser.parseRemoveInterceptParams(command.params));\n      case 'network.setCacheBehavior':\n        throw new protocol_js_1.UnknownErrorException(\"Method 'network.setCacheBehavior' is not implemented.\");\n      // keep-sorted end\n      // Permissions domain\n      // keep-sorted start block=yes\n      case 'permissions.setPermission':\n        return await this.#permissionsProcessor.setPermissions(this.#parser.parseSetPermissionsParams(command.params));\n      // keep-sorted end\n      // Script domain\n      // keep-sorted start block=yes\n      case 'script.addPreloadScript':\n        return await this.#scriptProcessor.addPreloadScript(this.#parser.parseAddPreloadScriptParams(command.params));\n      case 'script.callFunction':\n        return await this.#scriptProcessor.callFunction(this.#parser.parseCallFunctionParams(this.#processTargetParams(command.params)));\n      case 'script.disown':\n        return await this.#scriptProcessor.disown(this.#parser.parseDisownParams(this.#processTargetParams(command.params)));\n      case 'script.evaluate':\n        return await this.#scriptProcessor.evaluate(this.#parser.parseEvaluateParams(this.#processTargetParams(command.params)));\n      case 'script.getRealms':\n        return this.#scriptProcessor.getRealms(this.#parser.parseGetRealmsParams(command.params));\n      case 'script.removePreloadScript':\n        return await this.#scriptProcessor.removePreloadScript(this.#parser.parseRemovePreloadScriptParams(command.params));\n      // keep-sorted end\n      // Session domain\n      // keep-sorted start block=yes\n      case 'session.new':\n        return await this.#sessionProcessor.new(command.params);\n      case 'session.status':\n        return this.#sessionProcessor.status();\n      case 'session.subscribe':\n        return await this.#sessionProcessor.subscribe(this.#parser.parseSubscribeParams(command.params), command.channel);\n      case 'session.unsubscribe':\n        return await this.#sessionProcessor.unsubscribe(this.#parser.parseSubscribeParams(command.params), command.channel);\n      // keep-sorted end\n      // Storage domain\n      // keep-sorted start block=yes\n      case 'storage.deleteCookies':\n        return await this.#storageProcessor.deleteCookies(this.#parser.parseDeleteCookiesParams(command.params));\n      case 'storage.getCookies':\n        return await this.#storageProcessor.getCookies(this.#parser.parseGetCookiesParams(command.params));\n      case 'storage.setCookie':\n        return await this.#storageProcessor.setCookie(this.#parser.parseSetCookieParams(command.params));\n      // keep-sorted end\n    }\n    // Intentionally kept outside the switch statement to ensure that\n    // ESLint @typescript-eslint/switch-exhaustiveness-check triggers if a new\n    // command is added.\n    throw new protocol_js_1.UnknownCommandException(`Unknown command '${command.method}'.`);\n  }\n  // Workaround for as zod.union always take the first schema\n  // https://github.com/w3c/webdriver-bidi/issues/635\n  #processTargetParams(params) {\n    if (typeof params === 'object' && params && 'target' in params && typeof params.target === 'object' && params.target && 'context' in params.target) {\n      delete params.target['realm'];\n    }\n    return params;\n  }\n  async processCommand(command) {\n    try {\n      const result = await this.#processCommand(command);\n      const response = {\n        type: 'success',\n        id: command.id,\n        result\n      };\n      this.emit(\"response\" /* CommandProcessorEvents.Response */, {\n        message: OutgoingMessage_js_1.OutgoingMessage.createResolved(response, command.channel),\n        event: command.method\n      });\n    } catch (e) {\n      if (e instanceof protocol_js_1.Exception) {\n        this.emit(\"response\" /* CommandProcessorEvents.Response */, {\n          message: OutgoingMessage_js_1.OutgoingMessage.createResolved(e.toErrorResponse(command.id), command.channel),\n          event: command.method\n        });\n      } else {\n        const error = e;\n        this.#logger?.(log_js_1.LogType.bidi, error);\n        this.emit(\"response\" /* CommandProcessorEvents.Response */, {\n          message: OutgoingMessage_js_1.OutgoingMessage.createResolved(new protocol_js_1.UnknownErrorException(error.message, error.stack).toErrorResponse(command.id), command.channel),\n          event: command.method\n        });\n      }\n    }\n  }\n}\nexports.CommandProcessor = CommandProcessor;","map":{"version":3,"names":["protocol_js_1","require","EventEmitter_js_1","log_js_1","BidiNoOpParser_js_1","BrowserProcessor_js_1","CdpProcessor_js_1","BrowsingContextProcessor_js_1","InputProcessor_js_1","NetworkProcessor_js_1","PermissionsProcessor_js_1","ScriptProcessor_js_1","SessionProcessor_js_1","StorageProcessor_js_1","OutgoingMessage_js_1","CommandProcessor","EventEmitter","browserProcessor","browsingContextProcessor","cdpProcessor","inputProcessor","networkProcessor","permissionsProcessor","scriptProcessor","sessionProcessor","storageProcessor","parser","logger","constructor","cdpConnection","browserCdpClient","eventManager","browsingContextStorage","realmStorage","preloadScriptStorage","networkStorage","BidiNoOpParser","initConnection","BrowserProcessor","BrowsingContextProcessor","CdpProcessor","InputProcessor","NetworkProcessor","PermissionsProcessor","ScriptProcessor","SessionProcessor","StorageProcessor","processCommand","#processCommand","command","method","close","createUserContext","params","getUserContexts","removeUserContext","parseRemoveUserContextParams","activate","parseActivateParams","captureScreenshot","parseCaptureScreenshotParams","parseCloseParams","create","parseCreateParams","getTree","parseGetTreeParams","handleUserPrompt","parseHandleUserPromptParams","locateNodes","parseLocateNodesParams","navigate","parseNavigateParams","print","parsePrintParams","reload","parseReloadParams","setViewport","parseSetViewportParams","traverseHistory","parseTraverseHistoryParams","getSession","parseGetSessionParams","resolveRealm","parseResolveRealmParams","sendCommand","parseSendCommandParams","performActions","parsePerformActionsParams","releaseActions","parseReleaseActionsParams","setFiles","parseSetFilesParams","addIntercept","parseAddInterceptParams","continueRequest","parseContinueRequestParams","continueResponse","parseContinueResponseParams","continueWithAuth","parseContinueWithAuthParams","failRequest","parseFailRequestParams","provideResponse","parseProvideResponseParams","removeIntercept","parseRemoveInterceptParams","UnknownErrorException","setPermissions","parseSetPermissionsParams","addPreloadScript","parseAddPreloadScriptParams","callFunction","parseCallFunctionParams","processTargetParams","disown","parseDisownParams","evaluate","parseEvaluateParams","getRealms","parseGetRealmsParams","removePreloadScript","parseRemovePreloadScriptParams","new","status","subscribe","parseSubscribeParams","channel","unsubscribe","deleteCookies","parseDeleteCookiesParams","getCookies","parseGetCookiesParams","setCookie","parseSetCookieParams","UnknownCommandException","#processTargetParams","target","result","response","type","id","emit","message","OutgoingMessage","createResolved","event","e","Exception","toErrorResponse","error","LogType","bidi","stack","exports"],"sources":["../../../src/bidiMapper/CommandProcessor.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}