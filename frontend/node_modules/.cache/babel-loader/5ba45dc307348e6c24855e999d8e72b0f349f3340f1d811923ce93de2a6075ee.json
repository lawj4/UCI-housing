{"ast":null,"code":"\"use strict\";\n\n/*\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.computeHeadersSize = computeHeadersSize;\nexports.bidiNetworkHeadersFromCdpNetworkHeaders = bidiNetworkHeadersFromCdpNetworkHeaders;\nexports.bidiNetworkHeadersFromCdpNetworkHeadersEntries = bidiNetworkHeadersFromCdpNetworkHeadersEntries;\nexports.cdpNetworkHeadersFromBidiNetworkHeaders = cdpNetworkHeadersFromBidiNetworkHeaders;\nexports.bidiNetworkHeadersFromCdpFetchHeaders = bidiNetworkHeadersFromCdpFetchHeaders;\nexports.cdpFetchHeadersFromBidiNetworkHeaders = cdpFetchHeadersFromBidiNetworkHeaders;\nexports.networkHeaderFromCookieHeaders = networkHeaderFromCookieHeaders;\nexports.cdpAuthChallengeResponseFromBidiAuthContinueWithAuthAction = cdpAuthChallengeResponseFromBidiAuthContinueWithAuthAction;\nexports.cdpToBiDiCookie = cdpToBiDiCookie;\nexports.deserializeByteValue = deserializeByteValue;\nexports.bidiToCdpCookie = bidiToCdpCookie;\nexports.sameSiteBiDiToCdp = sameSiteBiDiToCdp;\nexports.isSpecialScheme = isSpecialScheme;\nexports.matchUrlPattern = matchUrlPattern;\nexports.bidiBodySizeFromCdpPostDataEntries = bidiBodySizeFromCdpPostDataEntries;\nexports.getTiming = getTiming;\nconst ErrorResponse_js_1 = require(\"../../../protocol/ErrorResponse.js\");\nconst Base64_js_1 = require(\"../../../utils/Base64.js\");\nconst UrlPattern_js_1 = require(\"../../../utils/UrlPattern.js\");\nfunction computeHeadersSize(headers) {\n  const requestHeaders = headers.reduce((acc, header) => {\n    return `${acc}${header.name}: ${header.value.value}\\r\\n`;\n  }, '');\n  return new TextEncoder().encode(requestHeaders).length;\n}\n/** Converts from CDP Network domain headers to BiDi network headers. */\nfunction bidiNetworkHeadersFromCdpNetworkHeaders(headers) {\n  if (!headers) {\n    return [];\n  }\n  return Object.entries(headers).map(([name, value]) => ({\n    name,\n    value: {\n      type: 'string',\n      value\n    }\n  }));\n}\n/** Converts from CDP Fetch domain headers to BiDi network headers. */\nfunction bidiNetworkHeadersFromCdpNetworkHeadersEntries(headers) {\n  if (!headers) {\n    return [];\n  }\n  return headers.map(({\n    name,\n    value\n  }) => ({\n    name,\n    value: {\n      type: 'string',\n      value\n    }\n  }));\n}\n/** Converts from Bidi network headers to CDP Network domain headers. */\nfunction cdpNetworkHeadersFromBidiNetworkHeaders(headers) {\n  if (headers === undefined) {\n    return undefined;\n  }\n  return headers.reduce((result, header) => {\n    // TODO: Distinguish between string and bytes?\n    result[header.name] = header.value.value;\n    return result;\n  }, {});\n}\n/** Converts from CDP Fetch domain header entries to Bidi network headers. */\nfunction bidiNetworkHeadersFromCdpFetchHeaders(headers) {\n  if (!headers) {\n    return [];\n  }\n  return headers.map(({\n    name,\n    value\n  }) => ({\n    name,\n    value: {\n      type: 'string',\n      value\n    }\n  }));\n}\n/** Converts from Bidi network headers to CDP Fetch domain header entries. */\nfunction cdpFetchHeadersFromBidiNetworkHeaders(headers) {\n  if (headers === undefined) {\n    return undefined;\n  }\n  return headers.map(({\n    name,\n    value\n  }) => ({\n    name,\n    value: value.value\n  }));\n}\nfunction networkHeaderFromCookieHeaders(headers) {\n  if (headers === undefined) {\n    return undefined;\n  }\n  const value = headers.reduce((acc, value, index) => {\n    if (index > 0) {\n      acc += ';';\n    }\n    const cookieValue = value.value.type === 'base64' ? btoa(value.value.value) : value.value.value;\n    acc += `${value.name}=${cookieValue}`;\n    return acc;\n  }, '');\n  return {\n    name: 'Cookie',\n    value: {\n      type: 'string',\n      value\n    }\n  };\n}\n/** Converts from Bidi auth action to CDP auth challenge response. */\nfunction cdpAuthChallengeResponseFromBidiAuthContinueWithAuthAction(action) {\n  switch (action) {\n    case 'default':\n      return 'Default';\n    case 'cancel':\n      return 'CancelAuth';\n    case 'provideCredentials':\n      return 'ProvideCredentials';\n  }\n}\n/**\n * Converts from CDP Network domain cookie to BiDi network cookie.\n * * https://chromedevtools.github.io/devtools-protocol/tot/Network/#type-Cookie\n * * https://w3c.github.io/webdriver-bidi/#type-network-Cookie\n */\nfunction cdpToBiDiCookie(cookie) {\n  const result = {\n    name: cookie.name,\n    value: {\n      type: 'string',\n      value: cookie.value\n    },\n    domain: cookie.domain,\n    path: cookie.path,\n    size: cookie.size,\n    httpOnly: cookie.httpOnly,\n    secure: cookie.secure,\n    sameSite: cookie.sameSite === undefined ? \"none\" /* Network.SameSite.None */ : sameSiteCdpToBiDi(cookie.sameSite),\n    ...(cookie.expires >= 0 ? {\n      expiry: cookie.expires\n    } : undefined)\n  };\n  // Extending with CDP-specific properties with `goog:` prefix.\n  result[`goog:session`] = cookie.session;\n  result[`goog:priority`] = cookie.priority;\n  result[`goog:sameParty`] = cookie.sameParty;\n  result[`goog:sourceScheme`] = cookie.sourceScheme;\n  result[`goog:sourcePort`] = cookie.sourcePort;\n  if (cookie.partitionKey !== undefined) {\n    result[`goog:partitionKey`] = cookie.partitionKey;\n  }\n  if (cookie.partitionKeyOpaque !== undefined) {\n    result[`goog:partitionKeyOpaque`] = cookie.partitionKeyOpaque;\n  }\n  return result;\n}\n/**\n * Decodes a byte value to a string.\n * @param {Network.BytesValue} value\n * @return {string}\n */\nfunction deserializeByteValue(value) {\n  if (value.type === 'base64') {\n    return (0, Base64_js_1.base64ToString)(value.value);\n  }\n  return value.value;\n}\n/**\n * Converts from BiDi set network cookie params to CDP Network domain cookie.\n * * https://w3c.github.io/webdriver-bidi/#type-network-Cookie\n * * https://chromedevtools.github.io/devtools-protocol/tot/Network/#type-CookieParam\n */\nfunction bidiToCdpCookie(params, partitionKey) {\n  const deserializedValue = deserializeByteValue(params.cookie.value);\n  const result = {\n    name: params.cookie.name,\n    value: deserializedValue,\n    domain: params.cookie.domain,\n    path: params.cookie.path ?? '/',\n    secure: params.cookie.secure ?? false,\n    httpOnly: params.cookie.httpOnly ?? false,\n    ...(partitionKey.sourceOrigin !== undefined && {\n      partitionKey: {\n        hasCrossSiteAncestor: false,\n        // CDP's `partitionKey.topLevelSite` is the BiDi's `partition.sourceOrigin`.\n        topLevelSite: partitionKey.sourceOrigin\n      }\n    }),\n    ...(params.cookie.expiry !== undefined && {\n      expires: params.cookie.expiry\n    }),\n    ...(params.cookie.sameSite !== undefined && {\n      sameSite: sameSiteBiDiToCdp(params.cookie.sameSite)\n    })\n  };\n  // Extending with CDP-specific properties with `goog:` prefix.\n  if (params.cookie[`goog:url`] !== undefined) {\n    result.url = params.cookie[`goog:url`];\n  }\n  if (params.cookie[`goog:priority`] !== undefined) {\n    result.priority = params.cookie[`goog:priority`];\n  }\n  if (params.cookie[`goog:sameParty`] !== undefined) {\n    result.sameParty = params.cookie[`goog:sameParty`];\n  }\n  if (params.cookie[`goog:sourceScheme`] !== undefined) {\n    result.sourceScheme = params.cookie[`goog:sourceScheme`];\n  }\n  if (params.cookie[`goog:sourcePort`] !== undefined) {\n    result.sourcePort = params.cookie[`goog:sourcePort`];\n  }\n  return result;\n}\nfunction sameSiteCdpToBiDi(sameSite) {\n  switch (sameSite) {\n    case 'Strict':\n      return \"strict\" /* Network.SameSite.Strict */;\n    case 'None':\n      return \"none\" /* Network.SameSite.None */;\n    case 'Lax':\n      return \"lax\" /* Network.SameSite.Lax */;\n    default:\n      // Defaults to `Lax`:\n      // https://web.dev/articles/samesite-cookies-explained#samesitelax_by_default\n      return \"lax\" /* Network.SameSite.Lax */;\n  }\n}\nfunction sameSiteBiDiToCdp(sameSite) {\n  switch (sameSite) {\n    case \"strict\" /* Network.SameSite.Strict */:\n      return 'Strict';\n    case \"lax\" /* Network.SameSite.Lax */:\n      return 'Lax';\n    case \"none\" /* Network.SameSite.None */:\n      return 'None';\n  }\n  throw new ErrorResponse_js_1.InvalidArgumentException(`Unknown 'sameSite' value ${sameSite}`);\n}\n/**\n * Returns true if the given protocol is special.\n * Special protocols are those that have a default port.\n *\n * Example inputs: 'http', 'http:'\n *\n * @see https://url.spec.whatwg.org/#special-scheme\n */\nfunction isSpecialScheme(protocol) {\n  return ['ftp', 'file', 'http', 'https', 'ws', 'wss'].includes(protocol.replace(/:$/, ''));\n}\n/** Matches the given URLPattern against the given URL. */\nfunction matchUrlPattern(urlPattern, url) {\n  switch (urlPattern.type) {\n    case 'string':\n      {\n        const pattern = new UrlPattern_js_1.URLPattern(urlPattern.pattern);\n        return new UrlPattern_js_1.URLPattern({\n          protocol: pattern.protocol,\n          hostname: pattern.hostname,\n          port: pattern.port,\n          pathname: pattern.pathname,\n          search: pattern.search\n        }).test(url);\n      }\n    case 'pattern':\n      return new UrlPattern_js_1.URLPattern(urlPattern).test(url);\n  }\n}\nfunction bidiBodySizeFromCdpPostDataEntries(entries) {\n  let size = 0;\n  for (const entry of entries) {\n    size += atob(entry.bytes ?? '').length;\n  }\n  return size;\n}\nfunction getTiming(timing) {\n  if (!timing) {\n    return 0;\n  }\n  if (timing < 0) {\n    return 0;\n  }\n  return timing;\n}","map":{"version":3,"names":["exports","computeHeadersSize","bidiNetworkHeadersFromCdpNetworkHeaders","bidiNetworkHeadersFromCdpNetworkHeadersEntries","cdpNetworkHeadersFromBidiNetworkHeaders","bidiNetworkHeadersFromCdpFetchHeaders","cdpFetchHeadersFromBidiNetworkHeaders","networkHeaderFromCookieHeaders","cdpAuthChallengeResponseFromBidiAuthContinueWithAuthAction","cdpToBiDiCookie","deserializeByteValue","bidiToCdpCookie","sameSiteBiDiToCdp","isSpecialScheme","matchUrlPattern","bidiBodySizeFromCdpPostDataEntries","getTiming","ErrorResponse_js_1","require","Base64_js_1","UrlPattern_js_1","headers","requestHeaders","reduce","acc","header","name","value","TextEncoder","encode","length","Object","entries","map","type","undefined","result","index","cookieValue","btoa","action","cookie","domain","path","size","httpOnly","secure","sameSite","sameSiteCdpToBiDi","expires","expiry","session","priority","sameParty","sourceScheme","sourcePort","partitionKey","partitionKeyOpaque","base64ToString","params","deserializedValue","sourceOrigin","hasCrossSiteAncestor","topLevelSite","url","InvalidArgumentException","protocol","includes","replace","urlPattern","pattern","URLPattern","hostname","port","pathname","search","test","entry","atob","bytes","timing"],"sources":["../../../../../src/bidiMapper/modules/network/NetworkUtils.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}